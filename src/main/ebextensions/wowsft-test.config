files:
    "/opt/elasticbeanstalk/hooks/appdeploy/post/91_test_log.sh":
        mode: "000755"
        owner: root
        group: root
        content: |
            sudo rm -rf /etc/httpd/conf.d/test_log.conf

            echo -e 'LogFormat "%h (%{X-Forwarded-For}i) %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" \"%{Authorization}i\" \"%{RealClass}C\"" test_access_log_format\nCustomLog /var/log/httpd/test-access_log test_access_log_format' | sudo tee /etc/httpd/conf.d/test_log.conf > /dev/null

            sudo service httpd reload

            sudo service awslogs restart

    "/opt/elasticbeanstalk/hooks/configdeploy/post/91_test_log.sh":
        mode: "000755"
        owner: root
        group: root
        content: |
            sudo rm -rf /etc/httpd/conf.d/test_log.conf

            echo -e 'LogFormat "%h (%{X-Forwarded-For}i) %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" \"%{Authorization}i\" \"%{RealClass}C\"" test_access_log_format\nCustomLog /var/log/httpd/test-access_log test_access_log_format' | sudo tee /etc/httpd/conf.d/test_log.conf > /dev/null

            sudo service httpd reload

            sudo service awslogs restart

    "/etc/awslogs/config/beanstalklogs.conf":
        mode: "000600"
        owner: root
        group: root
        content: |
            [/var/log/httpd/error_log]
            log_group_name=/aws/elasticbeanstalk/WoWSFT-Tester/var/log/httpd/error_log
            log_stream_name={instance_id}
            file=/var/log/httpd/error_log*

            [/var/log/httpd/access_log]
            log_group_name=/aws/elasticbeanstalk/WoWSFT-Tester/var/log/httpd/access_log
            log_stream_name={instance_id}
            file=/var/log/httpd/access_log*

            [/var/log/nginx/error.log]
            log_group_name=/aws/elasticbeanstalk/WoWSFT-Tester/var/log/nginx/error.log
            log_stream_name={instance_id}
            file=/var/log/nginx/error.log*

            [/var/log/nginx/access.log]
            log_group_name=/aws/elasticbeanstalk/WoWSFT-Tester/var/log/nginx/access.log
            log_stream_name={instance_id}
            file=/var/log/nginx/access.log*

            [/var/log/eb-activity.log]
            log_group_name=/aws/elasticbeanstalk/WoWSFT-Tester/var/log/eb-activity.log
            log_stream_name={instance_id}
            file=/var/log/eb-activity.log*

            [/var/log/httpd/test-access_log]
            log_group_name=/aws/elasticbeanstalk/WoWSFT-Tester/var/log/httpd/test-access_log
            log_stream_name={instance_id}
            file=/var/log/httpd/test-access_log*
