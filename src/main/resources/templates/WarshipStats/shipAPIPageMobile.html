<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta charset="UTF-8" />
    <link rel="icon" th:href="@{/images/Icon/WoWSFT_Icon.png}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/js/jquery/jquery-ui-1.12.1/jquery-ui.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/ShipStyle.css}" />
    <meta name="viewport" content="width=device-width, initial-scale=0.5, user-scalable=yes" />
    <script th:src="@{/js/jquery/jquery-3.2.1.js}"></script>
    <script th:src="@{/js/jquery/jquery-ui-1.12.1/jquery-ui.js}"></script>
    <script th:src="@{/js/accounting/accounting.js}"></script>
    <title>WoWS Fitting Tool by Aesis</title>
</head>
<body>
<header>
</header>
<main>
    <div class="shipAPIData" id="shipAPIData" th:fragment="shipAPIData" th:unless="${shipAPI == null}" style="">
        <div id="hullStats" class="hullStats" style="width: 300px;">
            <div th:if="${shipAPI.hull != null}" id="hull">
                <strong>Hull</strong><br />
                <span style="float: left;">Health</span>
                <span style="float: right;" th:if="${configurationAPI != null and shipAPI.hull.health - configurationAPI.hull.health != 0}" th:text="${shipAPI.hull.health - configurationAPI.hull.health > 0 ? ' (+' + #numbers.formatInteger(shipAPI.hull.health - configurationAPI.hull.health, 1, 'COMMA') + ')' : ' (' + #numbers.formatInteger(shipAPI.hull.health - configurationAPI.hull.health, 1, 'COMMA') + ')'}"/>
                <span style="float: right;" th:text="${#numbers.formatInteger(shipAPI.hull.health, 1, 'COMMA') + ' hp'}"/><br />
                <span style="float: left;">Armour</span>
                <span style="float: right;" th:text="${shipAPI.hull.range.min} + ' ~ ' + ${shipAPI.hull.range.max} + ' mm'"/><br />
                <span style="float: left;">- Bow</span>
                <span style="float: right;" th:if="${shipAPI.armour.extremities != null}" th:text="${shipAPI.armour.extremities.min} + ' ~ ' + ${shipAPI.armour.extremities.max} + ' mm'"/><br />
                <span th:text="'- Citadel'" th:if="${shipAPI.armour.citadel.max > 0}" style="float: left;"/><span style="float: right;" th:if="${shipAPI.armour.citadel.max > 0}" th:text="${shipAPI.armour.citadel.max} + ' mm'"/><br th:if="${shipAPI.armour.citadel.max > 0}"/>
                <span style="float: left;">Burn</span>
                <span style="float: right;" th:if="${configurationAPI != null and shipAPI.burn - configurationAPI.burn != 0}" th:text="${shipAPI.burn - configurationAPI.burn > 0 ? ' (+' + #numbers.formatDecimal(shipAPI.burn - configurationAPI.burn, 1, 1) + ')' : ' (' + #numbers.formatDecimal(shipAPI.burn - configurationAPI.burn, 1, 1) + ')'}"/>
                <span style="float: right" th:text="${#numbers.formatDecimal(shipAPI.burn, 1, 1)} + ' s'"/><br />
                <span style="float: left;">Flood</span>
                <span style="float: right;" th:if="${configurationAPI != null and shipAPI.flood - configurationAPI.flood != 0}" th:text="${shipAPI.flood - configurationAPI.flood > 0 ? ' (+' + #numbers.formatDecimal(shipAPI.flood - configurationAPI.flood, 1, 1) + ')' : ' (' + #numbers.formatDecimal(shipAPI.flood - configurationAPI.flood, 1, 1) + ')'}"/>
                <span style="float: right" th:text="${#numbers.formatDecimal(shipAPI.flood, 1, 1)} + ' s'"/><br />
            </div>
            <br />
            <div th:if="${shipAPI.mobility != null}" id="mobility">
                <strong>Mobility</strong><br />
                <span style="float:left;">Speed</span>
                <span style="float: right;" th:if="${configurationAPI != null and shipAPI.mobility.max_speed - configurationAPI.mobility.max_speed != 0}" th:text="${shipAPI.mobility.max_speed - configurationAPI.mobility.max_speed > 0 ? ' (+' + #numbers.formatDecimal(shipAPI.mobility.max_speed - configurationAPI.mobility.max_speed, 1, 1) + ')' : ' (' + #numbers.formatDecimal(shipAPI.mobility.max_speed - configurationAPI.mobility.max_speed, 1, 1) + ')'}"/>
                <span style="float: right;" th:text="${#numbers.formatDecimal(shipAPI.mobility.max_speed, 1, 1)} + ' kts'"/><br />
                <span style="float:left;">Rudder Shift</span>
                <span style="float: right;" th:if="${configurationAPI != null and shipAPI.mobility.rudder_time - configurationAPI.mobility.rudder_time != 0}" th:text="${shipAPI.mobility.rudder_time - configurationAPI.mobility.rudder_time > 0 ? ' (+' + #numbers.formatDecimal(shipAPI.mobility.rudder_time - configurationAPI.mobility.rudder_time, 1, 1) + ')' : ' (' + #numbers.formatDecimal(shipAPI.mobility.rudder_time - configurationAPI.mobility.rudder_time, 1, 1) + ')'}"/>
                <span style="float: right;" th:text="${#numbers.formatDecimal(shipAPI.mobility.rudder_time, 1, 1)} + ' s'"/><br />
                <span style="float:left;">Turn Radius</span>
                <span style="float: right;" th:text="${#numbers.formatInteger(shipAPI.mobility.turning_radius, 1, 'COMMA')} + ' m'"/><br />
            </div>
            <br />
            <div th:if="${shipAPI.concealment != null}" id="concealment">
                <strong>Concealment</strong><br />
                <span style="float:left;">Surface</span>
                <span style="float: right;" th:if="${configurationAPI != null and shipAPI.concealment.detect_distance_by_ship - configurationAPI.concealment.detect_distance_by_ship != 0}" th:text="${shipAPI.concealment.detect_distance_by_ship - configurationAPI.concealment.detect_distance_by_ship > 0 ? ' (+' + #numbers.formatDecimal(shipAPI.concealment.detect_distance_by_ship - configurationAPI.concealment.detect_distance_by_ship, 1, 1) + ')' : ' (' + #numbers.formatDecimal(shipAPI.concealment.detect_distance_by_ship - configurationAPI.concealment.detect_distance_by_ship, 1, 1) + ')'}"/>
                <span style="float: right;" th:text="${#numbers.formatDecimal(shipAPI.concealment.detect_distance_by_ship, 1, 1)} + ' km'"/><br />
                <span style="float:left;">Air</span>
                <span style="float: right;" th:if="${configurationAPI != null and shipAPI.concealment.detect_distance_by_plane - configurationAPI.concealment.detect_distance_by_plane != 0}" th:text="${shipAPI.concealment.detect_distance_by_plane - configurationAPI.concealment.detect_distance_by_plane > 0 ? ' (+' + #numbers.formatDecimal(shipAPI.concealment.detect_distance_by_plane - configurationAPI.concealment.detect_distance_by_plane, 1, 1) + ')' : ' (' + #numbers.formatDecimal(shipAPI.concealment.detect_distance_by_plane - configurationAPI.concealment.detect_distance_by_plane, 1, 1) + ')'}"/>
                <span style="float: right;" th:text="${#numbers.formatDecimal(shipAPI.concealment.detect_distance_by_plane, 1, 1)} + ' km'"/><br />
                <span th:text="'Stealth Fire'" th:if="${shipAPI.artillery != null}" style="float: left;"/>
                <span style="float: right;" th:if="${configurationAPI != null and configurationAPI.artillery != null and shipAPI.artillery.distance - configurationAPI.artillery.distance != 0}" th:text="${shipAPI.artillery.distance - configurationAPI.artillery.distance > 0 ? ' (+' + #numbers.formatDecimal(shipAPI.artillery.distance - configurationAPI.artillery.distance, 1, 1) + ')' : ' (' + #numbers.formatDecimal(shipAPI.artillery.distance - configurationAPI.artillery.distance, 1, 1) + ')'}"/>
                <span th:if="${shipAPI.artillery != null}" style="float: right;" th:text="${#numbers.formatDecimal(shipAPI.artillery.distance, 1, 1)} + ' km'"/><br />
            </div>
        </div>
        <br />
        <br />
        <div id="mainWeaponStats" class="mainWeaponStats" style="width: 300px;">
            <div th:if="${shipAPI.artillery != null}" id="artillery">
                <strong>Main Battery</strong><br />
                <li th:each="slot : ${shipAPI.artillery.slots}" name="guns">
                    <u style="float: left;" th:text="${slot.value.guns} + ' X ' + ${slot.value.barrels} + ' ' + ${slot.value.name}"/><br />
                </li>
                <th:block th:if="${shipAPI.shipComponents.artillery != null}">
                    <span style="float:left;">Sigma</span>
                    <span style="float: right" th:text="${#numbers.formatDecimal(shipAPI.shipComponents.artillery.sigmaCount, 1, 2)}"/><br />
                </th:block>
                <span style="float:left;">Distance</span>
                <span style="float: right;" th:if="${configurationAPI != null and shipAPI.artillery.distance - configurationAPI.artillery.distance != 0}" th:text="${shipAPI.artillery.distance - configurationAPI.artillery.distance > 0 ? ' (+' + #numbers.formatDecimal(shipAPI.artillery.distance - configurationAPI.artillery.distance, 1, 1) + ')' : ' (' + #numbers.formatDecimal(shipAPI.artillery.distance - configurationAPI.artillery.distance, 1, 1) + ')'}"/>
                <span style="float: right;" th:text="${#numbers.formatDecimal(shipAPI.artillery.distance, 1, 1)} + ' km'"/><br />
                <span style="float:left;">Dispersion</span>
                <span style="float: right;" th:if="${configurationAPI != null and shipAPI.artillery.max_dispersion - configurationAPI.artillery.max_dispersion != 0}" th:text="${shipAPI.artillery.max_dispersion - configurationAPI.artillery.max_dispersion > 0 ? ' (+' + #numbers.formatDecimal(shipAPI.artillery.max_dispersion - configurationAPI.artillery.max_dispersion, 1, 1) + ')' : ' (' + #numbers.formatDecimal(shipAPI.artillery.max_dispersion - configurationAPI.artillery.max_dispersion, 1, 1) + ')'}"/>
                <span style="float: right;" th:text="${#numbers.formatDecimal(shipAPI.artillery.max_dispersion, 1, 1)} + ' m'"/><br />
                <span style="float:left;">Reload</span>
                <span id="reloadDiff" style="float: right;" th:if="${configurationAPI != null and 60 / shipAPI.artillery.gun_rate - 60 / configurationAPI.artillery.gun_rate != 0}" th:text="${60 / shipAPI.artillery.gun_rate - 60 / configurationAPI.artillery.gun_rate > 0 ? ' (+' + #numbers.formatDecimal(60 / shipAPI.artillery.gun_rate - 60 / configurationAPI.artillery.gun_rate, 1, 1) + ')' : ' (' + #numbers.formatDecimal(60 / shipAPI.artillery.gun_rate - 60 / configurationAPI.artillery.gun_rate, 1, 1) + ')'}"/>
                <span id="reload" style="float: right;" th:text="${#numbers.formatDecimal(60 / shipAPI.artillery.gun_rate, 1, 1)} + ' s'"/><br />
                <span style="float:left;">RoF</span>
                <span id="rofDiff" style="float: right;" th:if="${configurationAPI != null and shipAPI.artillery.gun_rate - configurationAPI.artillery.gun_rate != 0}" th:text="${shipAPI.artillery.gun_rate - configurationAPI.artillery.gun_rate > 0 ? ' (+' + #numbers.formatDecimal(shipAPI.artillery.gun_rate - configurationAPI.artillery.gun_rate, 1, 2) + ')' : ' (' + #numbers.formatDecimal(shipAPI.artillery.gun_rate - configurationAPI.artillery.gun_rate, 1, 2) + ')'}"/>
                <span id="rof" style="float: right;" th:text="${#numbers.formatDecimal(shipAPI.artillery.gun_rate, 0 ,2)} + ' RPM'"/><br />
                <span style="float:left;">Rotation</span>
                <span style="float: right;" th:if="${configurationAPI != null and shipAPI.artillery.rotation_time - configurationAPI.artillery.rotation_time != 0}" th:text="${shipAPI.artillery.rotation_time - configurationAPI.artillery.rotation_time > 0 ? ' (+' + #numbers.formatDecimal(shipAPI.artillery.rotation_time - configurationAPI.artillery.rotation_time, 1, 2) + ')' : ' (' + #numbers.formatDecimal(shipAPI.artillery.rotation_time - configurationAPI.artillery.rotation_time, 1, 2) + ')'}"/>
                <span style="float: right;" th:text="${#numbers.formatDecimal(shipAPI.artillery.rotation_time, 1, 2)} + ' s'"/><br />
                <span style="float:left;">Rotation / 180 deg</span>
                <span style="float: right;" th:if="${configurationAPI != null and 180 / shipAPI.artillery.rotation_time - 180 / configurationAPI.artillery.rotation_time != 0}" th:text="${180 / shipAPI.artillery.rotation_time - 180 / configurationAPI.artillery.rotation_time > 0 ? ' (+' + #numbers.formatDecimal(180 / shipAPI.artillery.rotation_time - 180 / configurationAPI.artillery.rotation_time, 1, 1) + ')' : ' (' + #numbers.formatDecimal(180 / shipAPI.artillery.rotation_time - 180 / configurationAPI.artillery.rotation_time, 1, 1) + ')'}"/>
                <span style="float: right;" th:text="${#numbers.formatDecimal(180 / shipAPI.artillery.rotation_time, 1, 1)} + ' deg / s'"/><br />
                <li th:if="${shell.value != null}" th:each="shell : ${shipAPI.artillery.shells}">
                    <u style="float: left;" th:text="${shell.value.name} + ' (' + ${shell.value.type} + ')'"/><br/>
                    <span style="float:left;">Damage</span>
                    <span style="float: right;"  th:text="${#numbers.formatInteger(shell.value.damage, 1, 'COMMA')} + ' hp'"/><br />
                    <span style="float:left;">-Per Salvo</span>
                    <span style="float: right;" th:id="${shell.value.type == 'HE' ? 'DamageHE' : 'DamageAP'}" th:text="${#numbers.formatInteger(shell.value.damage * shipAPI.artillery.totalGuns, 1, 'COMMA')} + ' hp'"/><br />
                    <span style="float:left;">-DPM</span>
                    <span style="float: right;" th:id="${shell.value.type == 'HE' ? 'DPMDiffHE' : 'DPMDiffAP'}" th:if="${configurationAPI != null and shipAPI.artillery.gun_rate - configurationAPI.artillery.gun_rate != 0}" th:text="${(shell.value.damage * shipAPI.artillery.totalGuns * (T(Float).parseFloat(#numbers.formatDecimal(shipAPI.artillery.gun_rate, 1, 2, 'POINT')) + 1)) - (shell.value.damage * configurationAPI.artillery.totalGuns * (T(Float).parseFloat(#numbers.formatDecimal(configurationAPI.artillery.gun_rate, 1, 2, 'POINT')) + 1)) > 0 ? '(+' + #numbers.formatInteger((shell.value.damage * shipAPI.artillery.totalGuns * (T(Float).parseFloat(#numbers.formatDecimal(shipAPI.artillery.gun_rate, 1, 2, 'POINT')) + 1)) - (shell.value.damage * configurationAPI.artillery.totalGuns * (T(Float).parseFloat(#numbers.formatDecimal(configurationAPI.artillery.gun_rate, 1, 2, 'POINT')) + 1)), 1, 'COMMA') + ')' : '(' + #numbers.formatInteger((shell.value.damage * shipAPI.artillery.totalGuns * (T(Float).parseFloat(#numbers.formatDecimal(shipAPI.artillery.gun_rate, 1, 2, 'POINT')) + 1)) - (shell.value.damage * configurationAPI.artillery.totalGuns * (T(Float).parseFloat(#numbers.formatDecimal(configurationAPI.artillery.gun_rate, 1, 2, 'POINT')) + 1)), 1, 'COMMA') + ')'}"/>
                    <span style="float: right;" th:id="${shell.value.type == 'HE' ? 'DPMHE' : 'DPMAP'}" th:text="${#numbers.formatInteger(shell.value.damage * shipAPI.artillery.totalGuns * (T(Float).parseFloat(#numbers.formatDecimal(shipAPI.artillery.gun_rate, 1, 2)) + 1), 1, 'COMMA') + ' hp'}"/><br />
                    <span style="float:left;">Speed</span>
                    <span style="float: right;" th:text="${#numbers.formatInteger(shell.value.bullet_speed, 1, 'COMMA')} + ' m / s'"/><br />
                    <span style="float:left;">Mass</span>
                    <span style="float: right;" th:text="${#numbers.formatInteger(shell.value.bullet_mass, 1, 'COMMA')} + ' kg'"/><br />
                    <th:block th:if="${shell.value.type == 'HE'}">
                        <span th:text="'Penetration'" style="float:left;"/>
                        <th:block th:if="${configurationAPI != null}">
                            <span style="float: right;" th:if="${(shipAPI.shipComponents.artillery.penetrationHE - configurationAPI.shipComponents.artillery.penetrationHE) != 0}" th:text="${'(+' + (shipAPI.shipComponents.artillery.penetrationHE - configurationAPI.shipComponents.artillery.penetrationHE) + ')'}"/>
                        </th:block>
                        <span style="float: right;" th:text="${shipAPI.shipComponents.artillery.penetrationHE + ' mm'}"/><br />
                    </th:block>
                    <span th:text="'Burn Probability'" th:if="${shell.value.burn_probability > 0}" style="float: left;"/>
                    <th:block th:if="${configurationAPI != null}">
                        <th:block th:if="${defaultShell.value != null and defaultShell.value.burn_probability > 0 and defaultShell.value.type == shell.value.type}" th:each="defaultShell : ${configurationAPI.artillery.shells}">
                            <span style="float: right;" th:if="${shell.value.burn_probability - defaultShell.value.burn_probability != 0 and shell.value.burn_probability > 0}" th:text="${shell.value.burn_probability - defaultShell.value.burn_probability > 0 ? ' (+' + #numbers.formatDecimal(shell.value.burn_probability - defaultShell.value.burn_probability, 1, 1) + ')' : ' (' + #numbers.formatDecimal(shell.value.burn_probability - defaultShell.value.burn_probability, 1, 1) + ')'}"/>
                        </th:block>
                    </th:block>
                    <span style="float: right;" th:if="${shell.value.burn_probability > 0}" th:text="${#numbers.formatDecimal(shell.value.burn_probability, 1, 1)} + ' %'"/><br th:if="${shell.value.burn_probability > 0}"/>
                    <span th:text="'- Per Salvo'" th:if="${shell.value.burn_probability > 0}" style="float: left;"/>
                    <th:block th:if="${configurationAPI != null}">
                        <th:block th:if="${defaultShell.value != null and defaultShell.value.burn_probability > 0 and defaultShell.value.type == shell.value.type}" th:each="defaultShell : ${configurationAPI.artillery.shells}">
                            <span style="float: right;" th:if="${shell.value.burn_probability - defaultShell.value.burn_probability != 0 and shell.value.burn_probability > 0}" th:text="${shell.value.burn_probability - defaultShell.value.burn_probability > 0 ? ' (+' + #numbers.formatDecimal((100 - (T(java.lang.Math).pow((100 - shell.value.burn_probability) / 100, shipAPI.artillery.totalGuns)) * 100) - (100 - (T(java.lang.Math).pow((100 - defaultShell.value.burn_probability) / 100, configurationAPI.artillery.totalGuns)) * 100), 1, 1) + ')' : ' (' + #numbers.formatDecimal((100 - (T(java.lang.Math).pow((100 - shell.value.burn_probability) / 100, shipAPI.artillery.totalGuns)) * 100) - (100 - (T(java.lang.Math).pow((100 - defaultShell.value.burn_probability) / 100, configurationAPI.artillery.totalGuns)) * 100), 1, 1) + ')'}"/>
                        </th:block>
                    </th:block>
                    <span style="float: right;" th:if="${shell.value.burn_probability > 0}" th:text="${#numbers.formatDecimal((100 - (T(java.lang.Math).pow((100 - shell.value.burn_probability) / 100, shipAPI.artillery.totalGuns)) * 100), 1, 1)} + ' %'"/><br th:if="${shell.value.burn_probability > 0}"/>
                </li>
                <th:block th:if="${adrenaline == true}">
                    <script th:inline="javascript">
                        //    <![CDATA[

                        $(function () {
                            var handle = $('#custom-handle').css('width', '2em').css('text-align', 'center');
                            var originalGunRate = parseFloat($('#rof').text().replace(' RPM', ''));
                            var DamageHE = parseInt($('#DamageHE').text().replace(',', '').replace(' hp', ''));
                            var DamageAP = parseInt($('#DamageAP').text().replace(',', '').replace(' hp', ''));

                            var rofDiffModified = 0;
                            if (document.getElementById('rofDiff') != null)
                            {
                                rofDiffModified = parseFloat(document.getElementById('rofDiff').textContent.replace('(', '').replace(')', ''));
                            }

                            $('#slider').slider({
                                orientation: "horizontal",
                                range: "min",
                                min: 0,
                                max: 100,
                                value: 100,
                                create: function() {
                                    handle.text($( this ).slider('value'));
                                },
                                slide: function(event, ui) {
                                    handle.text(ui.value);
                                },
                                change: function (event, ui) {
                                    shipHP = test(parseInt(ui.value));

                                    function test(shipHP)
                                    {
                                        var coef = 1 - ((100 - shipHP) * 0.2 / 100);
                                        var newGunRate = (originalGunRate / coef);

                                        $('#rof').text(newGunRate.toFixed(2) + ' RPM');
                                        $('#reload').text((60 / newGunRate).toFixed(1) + ' s');
                                        if ($('#upgradeCompareCheckBox').is(':checked'))
                                        {
                                            if (document.getElementById('rofDiff') == null && document.getElementById('reloadDiff') == null)
                                            {
                                                if (newGunRate - originalGunRate != 0)
                                                {
                                                    var reloadDiff = document.createElement('span');
                                                    reloadDiff.id = 'reloadDiff';
                                                    reloadDiff.style = 'float: right;';

                                                    var reloadDiffText = document.createTextNode(((60 / newGunRate) - (60 / originalGunRate)) > 0 ? '(+' + ((60 / newGunRate) - (60 / originalGunRate)).toFixed(1) + ')' : '(' + ((60 / newGunRate) - (60 / originalGunRate)).toFixed(1) + ')');
                                                    reloadDiff.appendChild(reloadDiffText);

                                                    var rofDiff = document.createElement('span');
                                                    rofDiff.id = 'rofDiff';
                                                    rofDiff.style = 'float: right;';

                                                    var rofDiffText = document.createTextNode((newGunRate - originalGunRate) > 0 ? '(+' + (newGunRate - originalGunRate).toFixed(2) + ')' : '(' + (newGunRate - originalGunRate).toFixed(2) + ')');
                                                    rofDiff.appendChild(rofDiffText);

                                                    var DPMDiffHE = document.createElement('span');
                                                    DPMDiffHE.id = 'DPMDiffHE';
                                                    DPMDiffHE.style = 'float: right;';

                                                    var DPMDiffHEText = document.createTextNode((newGunRate - originalGunRate) > 0 ? '(+' + ((newGunRate - originalGunRate) * DamageHE).toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ')' : '(' + ((newGunRate - originalGunRate) * DamageHE).toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ')');
                                                    DPMDiffHE.appendChild(DPMDiffHEText);

                                                    var DPMDiffAP = document.createElement('span');
                                                    DPMDiffAP.id = 'DPMDiffAP';
                                                    DPMDiffAP.style = 'float: right;';

                                                    var DPMDiffAPText = document.createTextNode((newGunRate - originalGunRate) > 0 ? '(+' + ((newGunRate - originalGunRate) * DamageAP).toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ')' : '(' + ((newGunRate - originalGunRate) * DamageAP).toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ')');
                                                    DPMDiffAP.appendChild(DPMDiffAPText);

                                                    var rof = document.getElementById('rof');
                                                    rof.parentNode.insertBefore(rofDiff, rof);

                                                    var reload = document.getElementById('reload');
                                                    reload.parentNode.insertBefore(reloadDiff, reload);

                                                    var DPMHE = document.getElementById('DPMHE');
                                                    DPMHE.parentNode.insertBefore(DPMDiffHE, DPMHE);

                                                    var DPMAP = document.getElementById('DPMAP');
                                                    DPMAP.parentNode.insertBefore(DPMDiffAP, DPMAP);
                                                }
                                            }
                                            else
                                            {
                                                var rofDiff = (newGunRate - originalGunRate + rofDiffModified);
                                                if (rofDiff != 0)
                                                {
                                                    $('#rofDiff').text(rofDiff > 0 ? '(+' + rofDiff.toFixed(2) + ')' : '(' + rofDiff.toFixed(2) + ')');
                                                    $('#reloadDiff').text(((60 / newGunRate) - (60 / (originalGunRate - rofDiffModified))) > 0 ? '(+' + ((60 / newGunRate) - (60 / (originalGunRate - rofDiffModified))).toFixed(1) + ')' : '(' + ((60 / newGunRate) - (60 / (originalGunRate - rofDiffModified))).toFixed(1) + ')');
                                                    $('#DPMDiffHE').text(rofDiff > 0 ? '(+' + (rofDiff * DamageHE).toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ')' : '(' + (rofDiff * DamageHE).toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ')');
                                                    $('#DPMDiffAP').text(rofDiff > 0 ? '(+' + (rofDiff * DamageAP).toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ')' : '(' + (rofDiff* DamageAP).toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ')');
                                                }
                                                else
                                                {
                                                    $('#rofDiff').remove();
                                                    $('#reloadDiff').remove();
                                                    $('#DPMDiffHE').remove();
                                                    $('#DPMDiffAP').remove();
                                                }
                                            }
                                        }
                                        $('#DPMHE').text(((newGunRate + 1) * DamageHE).toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ' hp');
                                        $('#DPMAP').text(((newGunRate + 1) * DamageAP).toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ' hp');
                                    }
                                }
                            })
                        })

                        //    ]]>
                    </script>
                    <div id="slider">
                        <div id="custom-handle" class="ui-slider-handle"></div>
                    </div>
                </th:block>
                <br />
            </div>
            <div th:if="${shipAPI.torpedoes != null}" id="torpedoes">
                <strong>Torpedoes</strong><br />
                <li th:each="slot : ${shipAPI.torpedoes.slots}">
                    <u style="float: left;" th:text="${slot.value.guns} + ' X ' + ${slot.value.barrels} + ' ' + ${slot.value.name}"/><br />
                </li>
                <span style="float:left;">Damage</span>
                <span style="float: right;" th:text="${#numbers.formatInteger(shipAPI.torpedoes.max_damage, 1, 'COMMA')} + ' hp'"/><br />
                <span style="float:left;">Reload</span>
                <span style="float: right;" th:if="${configurationAPI != null and shipAPI.torpedoes.reload_time - configurationAPI.torpedoes.reload_time != 0}" th:text="${shipAPI.torpedoes.reload_time - configurationAPI.torpedoes.reload_time > 0 ? ' (+' + #numbers.formatDecimal(shipAPI.torpedoes.reload_time - configurationAPI.torpedoes.reload_time, 1, 1) + ')' : ' (' + #numbers.formatDecimal(shipAPI.torpedoes.reload_time - configurationAPI.torpedoes.reload_time, 1, 1) + ')'}"/>
                <span style="float: right;" th:text="${#numbers.formatDecimal(shipAPI.torpedoes.reload_time, 1, 1)} + ' s'"/><br />
                <span style="float:left;">Speed</span>
                <span style="float: right;" th:if="${configurationAPI != null and shipAPI.torpedoes.torpedo_speed - configurationAPI.torpedoes.torpedo_speed != 0}" th:text="${shipAPI.torpedoes.torpedo_speed - configurationAPI.torpedoes.torpedo_speed > 0 ? ' (+' + #numbers.formatDecimal(shipAPI.torpedoes.torpedo_speed - configurationAPI.torpedoes.torpedo_speed, 1, 1) + ')' : ' (' + #numbers.formatDecimal(shipAPI.torpedoes.torpedo_speed - configurationAPI.torpedoes.torpedo_speed, 1, 1) + ')'}"/>
                <span style="float: right;" th:text="${#numbers.formatDecimal(shipAPI.torpedoes.torpedo_speed, 1, 1)} + ' kts'"/><br />
                <span style="float:left;">Distance</span>
                <span style="float: right;" th:if="${configurationAPI != null and shipAPI.torpedoes.distance - configurationAPI.torpedoes.distance != 0}" th:text="${shipAPI.torpedoes.distance - configurationAPI.torpedoes.distance > 0 ? ' (+' + #numbers.formatDecimal(shipAPI.torpedoes.distance - configurationAPI.torpedoes.distance, 1, 1) + ')' : ' (' + #numbers.formatDecimal(shipAPI.torpedoes.distance - configurationAPI.torpedoes.distance, 1, 1) + ')'}"/>
                <span style="float: right;" th:text="${#numbers.formatDecimal(shipAPI.torpedoes.distance, 1, 1)} + ' km'"/><br />
                <span style="float:left;">Visibility</span>
                <span style="float: right;" th:text="${#numbers.formatDecimal(shipAPI.torpedoes.visibility_dist, 1, 1)} + ' km'"/><br />
                <span style="float:left;">Reaction</span>
                <span style="float: right;" th:if="${configurationAPI != null and shipAPI.torpedoes.torpedo_speed - configurationAPI.torpedoes.torpedo_speed != 0}" th:text="${shipAPI.torpedoes.torpedo_speed - configurationAPI.torpedoes.torpedo_speed &gt; 0 ? ' (' + #numbers.formatDecimal((shipAPI.torpedoes.visibility_dist * 1000 / (shipAPI.torpedoes.torpedo_speed * 2.6)) - (configurationAPI.torpedoes.visibility_dist * 1000 / (configurationAPI.torpedoes.torpedo_speed * 2.6)), 1, 1) + ')' : ' (+' + #numbers.formatDecimal((shipAPI.torpedoes.visibility_dist * 1000 / (shipAPI.torpedoes.torpedo_speed * 2.6)) - (configurationAPI.torpedoes.visibility_dist * 1000 / (configurationAPI.torpedoes.torpedo_speed * 2.6)), 1, 1) + ')'}"/>
                <span style="float: right;" th:text="${#numbers.formatDecimal(shipAPI.torpedoes.visibility_dist * 1000 / (shipAPI.torpedoes.torpedo_speed * 2.6), 1, 1)} + ' s'"/><br />
            </div>
            <div th:if="${shipAPI.flight_control != null}" id="flight_control">
                <strong>Flight Control</strong><br />
                <strong style="float: left;" th:if="${shipAPI.fighters != null}" th:text="'Fighters'"/>
                <span style="float: right;" th:if="${configurationAPI != null and configurationAPI.fighters != null and shipAPI.fighters.count_in_squadron.max - configurationAPI.fighters.count_in_squadron.max != 0}" th:text="${shipAPI.fighters.count_in_squadron.max - configurationAPI.fighters.count_in_squadron.max > 0 ? '(+' + #numbers.formatInteger(shipAPI.fighters.count_in_squadron.max - configurationAPI.fighters.count_in_squadron.max, 0) + ')' : '(' + #numbers.formatInteger(shipAPI.fighters.count_in_squadron.max - configurationAPI.fighters.count_in_squadron.max, 0) + ')'}"/>
                <span style="float: right;" th:text="${shipAPI.flight_control.fighter_squadrons} + ' X ' + ${shipAPI.fighters != null ? shipAPI.fighters.count_in_squadron.max : 0}"/><br />
                <span style="float: left;" th:if="${shipAPI.fighters != null}" th:text="'Tier'"/>
                <span style="float: right;" th:if="${shipAPI.fighters != null}" th:text="${shipAPI.fighters.plane_level}"/><br th:if="${shipAPI.fighters != null}"/>
                <span style="float: left;" th:if="${shipAPI.fighters != null}" th:text="'Speed'"/>
                <span style="float: right;" th:if="${configurationAPI != null and configurationAPI.fighters != null and shipAPI.fighters.cruise_speed - configurationAPI.fighters.cruise_speed != 0}" th:text="${shipAPI.fighters.cruise_speed - configurationAPI.fighters.cruise_speed > 0 ? '(+' + #numbers.formatDecimal(shipAPI.fighters.cruise_speed - configurationAPI.fighters.cruise_speed, 1, 1) + ')' : '(' + #numbers.formatDecimal(shipAPI.fighters.cruise_speed - configurationAPI.fighters.cruise_speed, 1, 1) + ')'}"/>
                <span style="float: right;" th:if="${shipAPI.fighters != null}" th:text="${#numbers.formatDecimal(shipAPI.fighters.cruise_speed, 1, 1) + ' kts'}"/><br th:if="${shipAPI.fighters != null}"/>
                <span style="float: left;" th:if="${shipAPI.fighters != null}" th:text="'Preparation'"/>
                <span style="float: right;" th:if="${configurationAPI != null and configurationAPI.fighters != null and shipAPI.fighters.prepare_time - configurationAPI.fighters.prepare_time != 0}" th:text="${shipAPI.fighters.prepare_time - configurationAPI.fighters.prepare_time > 0 ? '(+' + #numbers.formatDecimal(shipAPI.fighters.prepare_time - configurationAPI.fighters.prepare_time, 1, 1) + ')' : '(' + #numbers.formatDecimal(shipAPI.fighters.prepare_time - configurationAPI.fighters.prepare_time, 1, 1) + ')'}"/>
                <span style="float: right;" th:text="${shipAPI.fighters != null ? #numbers.formatDecimal(shipAPI.fighters.prepare_time, 1, 1) : 0} + ' s'"/><br />
                <br th:if="${shipAPI.fighters != null}"/>
                <strong style="float: left;" th:if="${shipAPI.dive_bomber != null}" th:text="'Dive Bomber'"/>
                <span style="float: right;" th:if="${configurationAPI != null and configurationAPI.dive_bomber != null and shipAPI.dive_bomber.count_in_squadron.max - configurationAPI.dive_bomber.count_in_squadron.max != 0}" th:text="${shipAPI.dive_bomber.count_in_squadron.max - configurationAPI.dive_bomber.count_in_squadron.max > 0 ? '(+' + #numbers.formatInteger(shipAPI.dive_bomber.count_in_squadron.max - configurationAPI.dive_bomber.count_in_squadron.max, 0) + ')' : '(' + #numbers.formatInteger(shipAPI.dive_bomber.count_in_squadron.max - configurationAPI.dive_bomber.count_in_squadron.max, 0) + ')'}"/>
                <span style="float: right;" th:if="${shipAPI.dive_bomber != null}" th:text="${shipAPI.flight_control.bomber_squadrons} + ' X ' + ${shipAPI.dive_bomber.count_in_squadron.max}"/><br th:if="${shipAPI.dive_bomber != null}"/>
                <span style="float: left;" th:if="${shipAPI.dive_bomber != null}" th:text="'Tier'"/>
                <span style="float: right;" th:if="${shipAPI.dive_bomber != null}" th:text="${shipAPI.dive_bomber.plane_level}"/><br th:if="${shipAPI.dive_bomber != null}"/>
                <span style="float: left;" th:if="${shipAPI.dive_bomber != null}" th:text="'Speed'"/>
                <span style="float: right;" th:if="${configurationAPI != null and configurationAPI.dive_bomber != null and shipAPI.dive_bomber.cruise_speed - configurationAPI.dive_bomber.cruise_speed != 0}" th:text="${shipAPI.dive_bomber.cruise_speed - configurationAPI.dive_bomber.cruise_speed > 0 ? '(+' + #numbers.formatDecimal(shipAPI.dive_bomber.cruise_speed - configurationAPI.dive_bomber.cruise_speed, 1, 1) + ')' : '(' + #numbers.formatDecimal(shipAPI.dive_bomber.cruise_speed - configurationAPI.dive_bomber.cruise_speed, 1, 1) + ')'}"/>
                <span style="float: right;" th:if="${shipAPI.dive_bomber != null}" th:text="${#numbers.formatDecimal(shipAPI.dive_bomber.cruise_speed, 1, 1) + ' kts'}"/><br th:if="${shipAPI.dive_bomber != null}"/>
                <span style="float: left;" th:if="${shipAPI.dive_bomber != null}" th:text="'Preparation'"/>
                <span style="float: right;" th:if="${configurationAPI != null and configurationAPI.dive_bomber != null and shipAPI.dive_bomber.prepare_time - configurationAPI.dive_bomber.prepare_time != 0}" th:text="${shipAPI.dive_bomber.prepare_time - configurationAPI.dive_bomber.prepare_time > 0 ? '(+' + #numbers.formatDecimal(shipAPI.dive_bomber.prepare_time - configurationAPI.dive_bomber.prepare_time, 1, 1) + ')' : '(' + #numbers.formatDecimal(shipAPI.dive_bomber.prepare_time - configurationAPI.dive_bomber.prepare_time, 1, 1) + ')'}"/>
                <span style="float: right;" th:if="${shipAPI.dive_bomber != null}" th:text="${#numbers.formatDecimal(shipAPI.dive_bomber.prepare_time, 1, 1) + ' s'}"/><br th:if="${shipAPI.dive_bomber != null}"/>
                <u style="float: left;" th:if="${shipAPI.dive_bomber != null}" th:text="${shipAPI.dive_bomber.bomb_name}"/><br th:if="${shipAPI.dive_bomber != null}"/>
                <span style="float:left;" th:if="${shipAPI.dive_bomber != null}" th:text="'Weight'"/>
                <span style="float:right;" th:if="${shipAPI.dive_bomber != null}" th:text="${#numbers.formatInteger(shipAPI.dive_bomber.bomb_bullet_mass, 1, 'COMMA') + ' kg'}"/><br th:if="${shipAPI.dive_bomber != null}"/>
                <span style="float:left;" th:if="${shipAPI.dive_bomber != null}" th:text="'Damage'"/>
                <span style="float: right;" th:if="${shipAPI.dive_bomber != null}" th:text="${#numbers.formatInteger(shipAPI.dive_bomber.bomb_damage, 1, 'COMMA') + ' hp'}"/><br th:if="${shipAPI.dive_bomber != null}"/>
                <span style="float: left;" th:if="${shipAPI.dive_bomber != null}" th:text="'-Per Squadron'"/>
                <span style="float: right;" th:if="${configurationAPI != null and configurationAPI.dive_bomber != null and shipAPI.dive_bomber.count_in_squadron.max - configurationAPI.dive_bomber.count_in_squadron.max != 0}" th:text="${(shipAPI.dive_bomber.count_in_squadron.max * shipAPI.dive_bomber.bomb_damage - configurationAPI.dive_bomber.count_in_squadron.max * configurationAPI.dive_bomber.bomb_damage) > 0 ? '(+' + (shipAPI.dive_bomber.count_in_squadron.max * shipAPI.dive_bomber.bomb_damage - configurationAPI.dive_bomber.count_in_squadron.max * configurationAPI.dive_bomber.bomb_damage) + ')' : '(' + (shipAPI.dive_bomber.count_in_squadron.max * shipAPI.dive_bomber.bomb_damage - configurationAPI.dive_bomber.count_in_squadron.max * configurationAPI.dive_bomber.bomb_damage) + ')'}"/>
                <span style="float: right;" th:if="${shipAPI.dive_bomber != null}" th:text="${#numbers.formatInteger(shipAPI.dive_bomber.count_in_squadron.max * shipAPI.dive_bomber.bomb_damage, 1, 'COMMA') + ' hp'}"/><br th:if="${shipAPI.dive_bomber != null}"/>
                <br th:if="${shipAPI.dive_bomber != null}"/>
                <strong style="float: left;" th:if="${shipAPI.torpedo_bomber != null}" th:text="'Torpedo Bomber'"/>
                <span style="float: right;" th:if="${shipAPI.torpedo_bomber != null}" th:text="${shipAPI.flight_control.torpedo_squadrons} + ' X ' + ${shipAPI.torpedo_bomber.count_in_squadron.max}"/><br th:if="${shipAPI.torpedo_bomber != null}"/>
                <span style="float: left;" th:if="${shipAPI.torpedo_bomber != null}" th:text="'Tier'"/>
                <span style="float: right;" th:if="${shipAPI.torpedo_bomber != null}" th:text="${shipAPI.torpedo_bomber.plane_level}"/><br th:if="${shipAPI.torpedo_bomber != null}"/>
                <span style="float: left;" th:if="${shipAPI.torpedo_bomber != null}" th:text="'Speed'"/>
                <span style="float: right;" th:if="${configurationAPI != null and configurationAPI.torpedo_bomber != null and shipAPI.torpedo_bomber.cruise_speed - configurationAPI.torpedo_bomber.cruise_speed != 0}" th:text="${shipAPI.torpedo_bomber.cruise_speed - configurationAPI.torpedo_bomber.cruise_speed > 0 ? '(+' + #numbers.formatDecimal(shipAPI.torpedo_bomber.cruise_speed - configurationAPI.torpedo_bomber.cruise_speed, 1, 1) + ')' : '(' + #numbers.formatDecimal(shipAPI.torpedo_bomber.cruise_speed - configurationAPI.torpedo_bomber.cruise_speed, 1, 1) + ')'}"/>
                <span style="float: right;" th:if="${shipAPI.torpedo_bomber != null}" th:text="${#numbers.formatDecimal(shipAPI.torpedo_bomber.cruise_speed, 1, 1) + ' kts'}"/><br th:if="${shipAPI.torpedo_bomber != null}"/>
                <span style="float: left;" th:if="${shipAPI.torpedo_bomber != null}" th:text="'Preparation'"/>
                <span style="float: right;" th:if="${configurationAPI != null and configurationAPI.torpedo_bomber != null and shipAPI.torpedo_bomber.prepare_time - configurationAPI.torpedo_bomber.prepare_time != 0}" th:text="${shipAPI.torpedo_bomber.prepare_time - configurationAPI.torpedo_bomber.prepare_time > 0 ? '(+' + #numbers.formatDecimal(shipAPI.torpedo_bomber.prepare_time - configurationAPI.torpedo_bomber.prepare_time, 1, 1) + ')' : '(' + #numbers.formatDecimal(shipAPI.torpedo_bomber.prepare_time - configurationAPI.torpedo_bomber.prepare_time, 1, 1) + ')'}"/>
                <span style="float: right;" th:if="${shipAPI.torpedo_bomber != null}" th:text="${#numbers.formatDecimal(shipAPI.torpedo_bomber.prepare_time, 1, 1) + ' s'}"/><br th:if="${shipAPI.torpedo_bomber != null}"/>
                <u style="float: left;" th:if="${shipAPI.torpedo_bomber != null}" th:text="${shipAPI.torpedo_bomber.torpedo_name}"/><br th:if="${shipAPI.torpedo_bomber != null}"/>
                <span style="float: left;" th:if="${shipAPI.torpedo_bomber != null}" th:text="'Speed'"/>
                <span style="float: right;" th:if="${configurationAPI != null and configurationAPI.torpedo_bomber != null and shipAPI.torpedo_bomber.torpedo_max_speed - configurationAPI.torpedo_bomber.torpedo_max_speed != 0}" th:text="${shipAPI.torpedo_bomber.torpedo_max_speed - configurationAPI.torpedo_bomber.torpedo_max_speed > 0 ? '(+' + #numbers.formatInteger(shipAPI.torpedo_bomber.torpedo_max_speed - configurationAPI.torpedo_bomber.torpedo_max_speed, 1, 'COMMA') + ')' : '(' + #numbers.formatInteger(shipAPI.torpedo_bomber.torpedo_max_speed - configurationAPI.torpedo_bomber.torpedo_max_speed, 1, 'COMMA') + ')'}"/>
                <span style="float: right;" th:if="${shipAPI.torpedo_bomber != null}" th:text="${#numbers.formatInteger(shipAPI.torpedo_bomber.torpedo_max_speed, 1, 'COMMA') + ' kts'}"/><br th:if="${shipAPI.torpedo_bomber != null}"/>
                <span style="float: left;" th:if="${shipAPI.torpedo_bomber != null}" th:text="'Distance'"/>
                <span style="float: right;" th:if="${configurationAPI != null and configurationAPI.torpedo_bomber != null and shipAPI.torpedo_bomber.torpedo_distance - configurationAPI.torpedo_bomber.torpedo_distance != 0}" th:text="${shipAPI.torpedo_bomber.torpedo_distance - configurationAPI.torpedo_bomber.torpedo_distance > 0 ? '(+' + #numbers.formatDecimal(shipAPI.torpedo_bomber.torpedo_distance - configurationAPI.torpedo_bomber.torpedo_distance, 1, 1) + ')' : '(' + #numbers.formatDecimal(shipAPI.torpedo_bomber.torpedo_distance - configurationAPI.torpedo_bomber.torpedo_distance, 1, 1) + ')'}"/>
                <span style="float: right;" th:if="${shipAPI.torpedo_bomber != null}" th:text="${#numbers.formatDecimal(shipAPI.torpedo_bomber.torpedo_distance, 1, 1) + ' km'}"/><br th:if="${shipAPI.torpedo_bomber != null}"/>
                <span style="float:left;" th:if="${shipAPI.torpedo_bomber != null}" th:text="'Damage'"/>
                <span style="float: right;" th:if="${shipAPI.torpedo_bomber != null}" th:text="${#numbers.formatInteger(shipAPI.torpedo_bomber.torpedo_damage, 1, 'COMMA') + ' hp'}"/><br th:if="${shipAPI.torpedo_bomber != null}"/>
                <span style="float: left;" th:if="${shipAPI.torpedo_bomber != null}" th:text="'-Per Squadron'"/>
                <span style="float: right;" th:if="${shipAPI.torpedo_bomber != null}" th:text="${#numbers.formatInteger(shipAPI.torpedo_bomber.count_in_squadron.max * shipAPI.torpedo_bomber.torpedo_damage, 1, 'COMMA') + ' hp'}"/><br th:if="${shipAPI.torpedo_bomber != null}"/>
            </div>
        </div>
        <br />
        <br />
        <div id="AASecondaryStats" class="AASecondaryStats" style="width: 300px;">
            <div th:if="${shipAPI.anti_aircraft != null}" id="anti_aircraft">
                <strong>Anti Air</strong><br />
                <li th:each="slot : ${shipAPI.anti_aircraft.slots}" th:id="${slot.value.caliber}">
                    <u style="float: left;" th:text="${slot.value.guns} + ' X ' + ${slot.value.name}"/><br />
                    <span style="float: left;">DPS</span>
                    <th:block th:if="${configurationAPI != null}">
                        <th:block th:if="${configurationAPI.anti_aircraft != null and defaultSlot.value != null and defaultSlot.value.guns == slot.value.guns and defaultSlot.value.name == slot.value.name}" th:each="defaultSlot : ${configurationAPI.anti_aircraft.slots}">
                            <span style="float: right;" th:if="${slot.value.avg_damage - defaultSlot.value.avg_damage != 0}" th:text="${slot.value.avg_damage - defaultSlot.value.avg_damage > 0 ? ' (+' + #numbers.formatDecimal(slot.value.avg_damage - defaultSlot.value.avg_damage, 1, 1) + ')' : ' (' + #numbers.formatDecimal(slot.value.avg_damage - defaultSlot.value.avg_damage, 1, 1) + ')'}"/>
                        </th:block>
                    </th:block>
                    <span style="float: right;" th:text="${#numbers.formatDecimal(slot.value.avg_damage, 1, 1)} + ' dps'"/><br />
                    <span style="float: left;">Distance</span>
                    <th:block th:if="${configurationAPI != null}">
                        <th:block th:if="${configurationAPI.anti_aircraft != null and defaultSlot.value != null and defaultSlot.value.guns == slot.value.guns and defaultSlot.value.name == slot.value.name}" th:each="defaultSlot : ${configurationAPI.anti_aircraft.slots}">
                            <span style="float: right;" th:if="${slot.value.distance - defaultSlot.value.distance != 0}" th:text="${slot.value.distance - defaultSlot.value.distance > 0 ? ' (+' + #numbers.formatDecimal(slot.value.distance - defaultSlot.value.distance, 1, 1) + ')' : ' (' + #numbers.formatDecimal(slot.value.distance - defaultSlot.value.distance, 1, 1) + ')'}"/>
                        </th:block>
                    </th:block>
                    <span style="float: right;" th:text="${#numbers.formatDecimal(slot.value.distance, 1, 1)} + ' km'"/><br />
                </li>
                <br />
            </div>
            <div th:if="${shipAPI.atbas != null}" id="atbas">
                <strong>Secondary</strong><br />
                <span style="float: left;">Max Distance</span>
                <span style="float: right;" th:if="${configurationAPI != null and shipAPI.atbas.distance - configurationAPI.atbas.distance != 0}" th:text="${shipAPI.atbas.distance - configurationAPI.atbas.distance > 0 ? ' (+' + #numbers.formatDecimal(shipAPI.atbas.distance - configurationAPI.atbas.distance, 1, 1) + ')' : ' (' + #numbers.formatDecimal(shipAPI.atbas.distance - configurationAPI.atbas.distance, 1, 1) + ')'}"/>
                <span style="float: right;" th:text="${#numbers.formatDecimal(shipAPI.atbas.distance, 1, 1)} + ' km'"/><br />
                <li th:each="slot : ${shipAPI.atbas.slots}" th:if="${shipAPI.atbas.slots != null}">
                    <u style="float: left;" th:text="${slot.value.name}"/><br />
                    <span style="float: left;">Damage</span>
                    <span style="float: right;" th:text="${#numbers.formatInteger(slot.value.damage, 1, 'COMMA')} + ' hp'"/><br />
                    <span style="float: left;">Reload</span>
                    <th:block th:if="${configurationAPI != null}">
                        <th:block th:if="${configurationAPI.atbas != null and defaultSlot.value != null and defaultSlot.value.shot_delay == slot.value.default_shot_delay and defaultSlot.value.name == slot.value.name}" th:each="defaultSlot : ${configurationAPI.atbas.slots}">
                            <span style="float: right;" th:if="${slot.value.shot_delay - defaultSlot.value.shot_delay != 0}" th:text="${slot.value.shot_delay - defaultSlot.value.shot_delay > 0 ? ' (+' + #numbers.formatDecimal(slot.value.shot_delay - defaultSlot.value.shot_delay, 1, 1) + ')' : ' (' + #numbers.formatDecimal(slot.value.shot_delay - defaultSlot.value.shot_delay, 1, 1) + ')'}"/>
                        </th:block>
                    </th:block>
                    <span style="float: right;" th:text="${#numbers.formatDecimal(slot.value.shot_delay, 1, 1)} + ' s'"/><br />
                    <span style="float: left;">Speed</span>
                    <span style="float: right;" th:text="${#numbers.formatDecimal(slot.value.bullet_speed, 1, 1)} + ' m / s'"/><br />
                    <span style="float: left;">Type</span>
                    <span style="float: right;" th:text="${slot.value.type}"/><br />
                    <span style="float: left;">Burn Probability</span>
                    <span style="float: right;" th:text="${#numbers.formatDecimal(slot.value.burn_probability, 1, 1)} + ' %'"/><br />
                </li>
            </div>
        </div>
    </div>
</main>
<script th:inline="javascript">
    //    <![CDATA[

    //    ]]>
</script>
</body>
</html>