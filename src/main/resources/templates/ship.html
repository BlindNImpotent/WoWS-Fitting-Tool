<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.0/themes/base/jquery-ui.css"/>
    <script th:src="@{/js/jquery/jquery-1.12.4.js}"></script>
    <script th:src="@{/js/jquery/jquery-ui.js}"></script>

    <title>World of Warships Fitting Tool</title>

    <script>
        $( function() {
            $( "#shipList" ).menu();
        } );
    </script>
    <style type="text/css">
        html
        {
            height: 100%;
            width:auto;
        }

        li
        {
            list-style-type: none;
        }

        .ui-menu
        {
            width: 175px;
        }

        #header
        {
            text-align:center;
        }

        #dropDownList
        {
            text-align:left;
            display: inline-block;
            vertical-align: top;
            float: left;
        }

        #name
        {
            margin-left: -175px;
            display: inline-block;
        }

        #ship
        {
            text-align: center;
        }

        #modules
        {
            display: inline-block;
            text-align: center;
        }

        #upgrades
        {
            display: inline-block;
            text-align: center;
        }

        #turretList
        {
            display: inline-block;
            vertical-align: text-top;
        }
        #hullList
        {
            display: inline-block;
            vertical-align: text-top;
        }
        #engineList
        {
            display: inline-block;
            vertical-align: text-top;
        }
        #radarList
        {
            display: inline-block;
            vertical-align: text-top;
        }
        #torpedoList
        {
            display: inline-block;
            vertical-align: text-top;
        }

        #hullStats
        {
            display: inline-block;
            text-align: left;
            vertical-align: text-top;
        }
        #blank1
        {
            display: inline-block;
            text-align: center;
            vertical-align: text-top;
        }
        #mainWeaponStats
        {
            display: inline-block;
            text-align: left;
            vertical-align: text-top;
        }
        #blank2
        {
            display: inline-block;
            text-align: center;
            vertical-align: text-top;
        }
        #AASecondaryStats
        {
            display: inline-block;
            text-align: left;
            vertical-align: text-top;
        }
        #blank3
        {
            display: inline-block;
            text-align: center;
            vertical-align: text-top;
        }
        #torpedo
        {
            display: inline-block;
            text-align: left;
            vertical-align: text-top;
        }

        .button
        {
            background-color:#fff;
            text-align: center;
            border-color: rgb(0,0,0);
            border-width: 1px;
            border-style: solid;
            border-radius: 5px;
            cursor: default;
        }

        .button_module
        {
            font-size: 12px;
            min-width: 100px;
            max-width: 100px;
            min-height: 100px;
            max-height: 100px;
            word-wrap: normal;
            cursor: pointer;
        }

        .button_module img
        {
            width: 50px;
            margin-bottom: 0px;
        }

        .button_module_selected
        {
            background-color:#fff;
            text-align: center;
            border-color: rgb(256,0,0);
            border-width: 1px;
            border-style: solid;
            border-radius: 5px;
            font-size: 12px;
            min-width: 100px;
            max-width: 100px;
            min-height: 100px;
            max-height: 100px;
            word-wrap: normal;
            cursor: pointer;
        }

        .button_module_selected img
        {
            width: 50px;
            margin-bottom: 0px;
        }

        /*.tier { float:right }*/
        .maxHP { float:right }
        .speed { float:right }
        .rudderShift { float:right }
        .turningRadius { float:right }
        .sConceal { float:right }
        .aConceal { float:right }
        .burnTime { float:right }
        .floodTime { float:right }

        .barrels { float:right }
        .maxMainGunRange { float:right }
        .mainGunReload { float:right }
        .mainGunRotation { float:right }
        .mainGunRotationTime { float:right }
        .APShellSpeed { float:right }
        .APShellDMG { float:right }
        .HEShellSpeed { float:right }
        .HEShellDMG { float:right }
        .HEShellBurnProb { float:right }
        .mainGunDispersionRange { float:right }
        .sigmaCount { float:right }
        .stealthFireSurfaceDetection { float:right }

        .antiAirAuraDistanceFar { float:right }
        .AAFarDPS { float:right }
        .antiAirAuraDistanceMedium { float:right }
        .AAMediumDPS { float:right }
        .antiAirAuraDistanceNear { float:right }
        .AANearDPS { float:right }
        .secondaryMaxDist { float:right }

        .tubes { float:right }
        .maxTorpedoRange { float:right }
        .torpedoReload { float:right }
        .torpedoSpeed { float:right }
        .torpedoVisibilityFactor { float:right }

    </style>

</head>
<body>
<header>
    <div id="header">
        <div id="dropDownList">
                <ul id="shipList">
                    <li th:each="nation : ${nameList.nationList}">
                        <span th:text="${nation}"/>
                        <ul>
                            <li th:each="shipType : ${nameList.shipTypeList}">
                                <span th:text="${shipType}"/>
                                <ul th:if="${nation == 'France' and shipType == 'AirCarrier'}">
                                    <li th:each="FranceAirCarrier : ${nameList.FranceAirCarrierList}">
                                        <a th:href="@{/ship/{name}(name = ${FranceAirCarrier})}">
                                            <span th:text="${FranceAirCarrier}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'France' and shipType == 'Battleship'}">
                                    <li th:each="FranceBattleship : ${nameList.FranceBattleshipList}">
                                        <a th:href="@{/ship/{name}(name = ${FranceBattleship})}">
                                            <span th:text="${FranceBattleship}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'France' and shipType == 'Cruiser'}">
                                    <li th:each="FranceCruiser : ${nameList.FranceCruiserList}">
                                        <a th:href="@{/ship/{name}(name = ${FranceCruiser})}">
                                            <span th:text="${FranceCruiser}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'France' and shipType == 'Destroyer'}">
                                    <li th:each="FranceDestroyer : ${nameList.FranceDestroyerList}">
                                        <a th:href="@{/ship/{name}(name = ${FranceDestroyer})}">
                                            <span th:text="${FranceDestroyer}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'France' and shipType == 'Premium'}">
                                    <li th:each="FrancePremium : ${nameList.FrancePremiumList}">
                                        <a th:href="@{/ship/{name}(name = ${FrancePremium})}">
                                            <span th:text="${FrancePremium}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'Germany' and shipType == 'AirCarrier'}">
                                    <li th:each="GermanyAirCarrier : ${nameList.GermanyAirCarrierList}">
                                        <a th:href="@{/ship/{name}(name = ${GermanyAirCarrier})}">
                                            <span th:text="${GermanyAirCarrier}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'Germany' and shipType == 'Battleship'}">
                                    <li th:each="GermanyBattleship : ${nameList.GermanyBattleshipList}">
                                        <a th:href="@{/ship/{name}(name = ${GermanyBattleship})}">
                                            <span th:text="${GermanyBattleship}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'Germany' and shipType == 'Cruiser'}">
                                    <li th:each="GermanyCruiser : ${nameList.GermanyCruiserList}">
                                        <a th:href="@{/ship/{name}(name = ${GermanyCruiser})}">
                                            <span th:text="${GermanyCruiser}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'Germany' and shipType == 'Destroyer'}">
                                    <li th:each="GermanyDestroyer : ${nameList.GermanyDestroyerList}">
                                        <a th:href="@{/ship/{name}(name = ${GermanyDestroyer})}">
                                            <span th:text="${GermanyDestroyer}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'Germany' and shipType == 'Premium'}">
                                    <li th:each="GermanyPremium : ${nameList.GermanyPremiumList}">
                                        <a th:href="@{/ship/{name}(name = ${GermanyPremium})}">
                                            <span th:text="${GermanyPremium}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'Japan' and shipType == 'AirCarrier'}">
                                    <li th:each="JapanAirCarrier : ${nameList.JapanAirCarrierList}">
                                        <a th:href="@{/ship/{name}(name = ${JapanAirCarrier})}">
                                            <span th:text="${JapanAirCarrier}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'Japan' and shipType == 'Battleship'}">
                                    <li th:each="JapanBattleship : ${nameList.JapanBattleshipList}">
                                        <a th:href="@{/ship/{name}(name = ${JapanBattleship})}">
                                            <span th:text="${JapanBattleship}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'Japan' and shipType == 'Cruiser'}">
                                    <li th:each="JapanCruiser : ${nameList.JapanCruiserList}">
                                        <a th:href="@{/ship/{name}(name = ${JapanCruiser})}">
                                            <span th:text="${JapanCruiser}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'Japan' and shipType == 'Destroyer'}">
                                    <li th:each="JapanDestroyer : ${nameList.JapanDestroyerList}">
                                        <a th:href="@{/ship/{name}(name = ${JapanDestroyer})}">
                                            <span th:text="${JapanDestroyer}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'Japan' and shipType == 'Premium'}">
                                    <li th:each="JapanPremium : ${nameList.JapanPremiumList}">
                                        <a th:href="@{/ship/{name}(name = ${JapanPremium})}">
                                            <span th:text="${JapanPremium}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'Pan-Asia' and shipType == 'Premium'}">
                                    <li th:each="PanAsiaPremium : ${nameList.PanAsiaPremiumList}">
                                        <a th:href="@{/ship/{name}(name = ${PanAsiaPremium})}">
                                            <span th:text="${PanAsiaPremium}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'Poland' and shipType == 'Premium'}">
                                    <li th:each="PolandPremium : ${nameList.PolandPremiumList}">
                                        <a th:href="@{/ship/{name}(name = ${PolandPremium})}">
                                            <span th:text="${PolandPremium}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'U.K.' and shipType == 'AirCarrier'}">
                                    <li th:each="UKAirCarrier : ${nameList.UKAirCarrierList}">
                                        <a th:href="@{/ship/{name}(name = ${UKAirCarrier})}">
                                            <span th:text="${UKAirCarrier}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'U.K.' and shipType == 'Battleship'}">
                                    <li th:each="UKBattleship : ${nameList.UKBattleshipList}">
                                        <a th:href="@{/ship/{name}(name = ${UKBattleship})}">
                                            <span th:text="${UKBattleship}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'U.K.' and shipType == 'Cruiser'}">
                                    <li th:each="UKCruiser : ${nameList.UKCruiserList}">
                                        <a th:href="@{/ship/{name}(name = ${UKCruiser})}">
                                            <span th:text="${UKCruiser}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'U.K.' and shipType == 'Destroyer'}">
                                    <li th:each="UKDestroyer : ${nameList.UKDestroyerList}">
                                        <a th:href="@{/ship/{name}(name = ${UKDestroyer})}">
                                            <span th:text="${UKDestroyer}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'U.K.' and shipType == 'Premium'}">
                                    <li th:each="UKPremium : ${nameList.UKPremiumList}">
                                        <a th:href="@{/ship/{name}(name = ${UKPremium})}">
                                            <span th:text="${UKPremium}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'U.S.A.' and shipType == 'AirCarrier'}">
                                    <li th:each="USAAirCarrier : ${nameList.USAAirCarrierList}">
                                        <a th:href="@{/ship/{name}(name = ${USAAirCarrier})}">
                                            <span th:text="${USAAirCarrier}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'U.S.A.' and shipType == 'Battleship'}">
                                    <li th:each="USABattleship : ${nameList.USABattleshipList}">
                                        <a th:href="@{/ship/{name}(name = ${USABattleship})}">
                                            <span th:text="${USABattleship}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'U.S.A.' and shipType == 'Cruiser'}">
                                    <li th:each="USACruiser : ${nameList.USACruiserList}">
                                        <a th:href="@{/ship/{name}(name = ${USACruiser})}">
                                            <span th:text="${USACruiser}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'U.S.A.' and shipType == 'Destroyer'}">
                                    <li th:each="USADestroyer : ${nameList.USADestroyerList}">
                                        <a th:href="@{/ship/{name}(name = ${USADestroyer})}">
                                            <span th:text="${USADestroyer}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'U.S.A.' and shipType == 'Premium'}">
                                    <li th:each="USAPremium : ${nameList.USAPremiumList}">
                                        <a th:href="@{/ship/{name}(name = ${USAPremium})}">
                                            <span th:text="${USAPremium}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'U.S.S.R.' and shipType == 'AirCarrier'}">
                                    <li th:each="USSRAirCarrier : ${nameList.USSRAirCarrierList}">
                                        <a th:href="@{/ship/{name}(name = ${USSRAirCarrier})}">
                                            <span th:text="${USSRAirCarrier}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'U.S.S.R.' and shipType == 'Battleship'}">
                                    <li th:each="USSRBattleship : ${nameList.USSRBattleshipList}">
                                        <a th:href="@{/ship/{name}(name = ${USSRBattleship})}">
                                            <span th:text="${USSRBattleship}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'U.S.S.R.' and shipType == 'Cruiser'}">
                                    <li th:each="USSRCruiser : ${nameList.USSRCruiserList}">
                                        <a th:href="@{/ship/{name}(name = ${USSRCruiser})}">
                                            <span th:text="${USSRCruiser}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'U.S.S.R.' and shipType == 'Destroyer'}">
                                    <li th:each="USSRDestroyer : ${nameList.USSRDestroyerList}">
                                        <a th:href="@{/ship/{name}(name = ${USSRDestroyer})}">
                                            <span th:text="${USSRDestroyer}"/>
                                        </a>
                                    </li>
                                </ul>
                                <ul th:if="${nation == 'U.S.S.R.' and shipType == 'Premium'}">
                                    <li th:each="USSRPremium : ${nameList.USSRPremiumList}">
                                        <a th:href="@{/ship/{name}(name = ${USSRPremium})}">
                                            <span th:text="${USSRPremium}"/>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        <div id="name">
        <h1 th:text="${name}"/>
        <br />
        <img th:src="${imagesMedium}" />
    </div>
    </div>
</header>
<main>
    <div class="container">
        <div id="ship">
            <div id="modules">
                <div id="turretList">
                    <li th:onclick="'turret(\'' + ${turret.index} +'\', \''+ ${turretIndexList} + '\');'" th:each="turret : ${turretUpgradeList}" th:id="${turret}">
                        <button class="button button_module" th:id="${turret.index}">
                            <img th:src="@{/images/Upgrades/icon_module_maingun.png}" /><br />
                            <span th:text="${turret.name}"/>
                        </button>
                    </li>
                </div>
                <div id="hullList">
                    <li th:onclick="'hull(\'' + ${hull.index} +'\', \''+ ${hullIndexList} + '\');'" th:each="hull : ${hullUpgradeList}" th:id="${hull}">
                        <button class="button button_module" th:id="${hull.index}">
                            <img th:src="@{/images/Upgrades/icon_module_hull.png}" /><br />
                            <span th:text="${hull.name}"/>
                        </button>
                    </li>
                </div>
                <div id="engineList">
                    <li th:onclick="'engine(\'' + ${engine.index} +'\', \''+ ${engineIndexList} + '\');'" th:each="engine : ${engineUpgradeList}" th:id="${engine}">
                        <button class="button button_module" th:id="${engine.index}">
                            <img th:src="@{/images/Upgrades/icon_module_engine.png}" /><br />
                            <span th:text="${engine.name}"/>
                        </button>
                    </li>
                </div>
                <div id="radarList">
                    <li th:onclick="'radar(\'' + ${radar.index} +'\', \''+ ${radarIndexList} + '\');'" th:each="radar : ${radarUpgradeList}" th:id="${radar}">
                        <button class="button button_module" th:id="${radar.index}">
                            <img th:src="@{/images/Upgrades/icon_module_radar.png}" /><br />
                            <span th:text="${radar.name}"/>
                        </button>
                    </li>
                </div>
                <div id="torpedoList">
                    <li th:onclick="'torpedo(\'' + ${torpedo.index} +'\', \''+ ${torpedoIndexList} + '\');'" th:each="torpedo : ${torpedoUpgradeList}" th:id="${torpedo}">
                        <button class="button button_module" th:id="${torpedo.index}">
                            <img th:src="@{/images/Upgrades/icon_module_torpedoes.png}" /><br />
                            <span th:text="${torpedo.name}"/>
                        </button>
                    </li>
                </div>
            </div>
            <div id="upgrades">



            </div>
            <div id="stats">
                    <div id="hullStats" class="hullStats">
                        <b>Hull</b><br />
                        <!--Tier<span class="tier"/><br />-->
                        Health<span class="maxHP"/><br />
                        Speed<span class="speed"/><br />
                        Rudder Shift<span class="rudderShift"/><br />
                        Turn Radius<span class="turningRadius"/><br />
                        Surface Conceal&emsp;&emsp;&emsp;<span class="sConceal"/><br />
                        Air Conceal<span class="aConceal"/><br />
                        Burn Time<span class="burnTime"/><br />
                        Flood Time<span class="floodTime"/><br />
                    </div>
                    <div id="blank1" class="blank">
                        &emsp;
                    </div>
                    <div th:if="${not #lists.isEmpty(turretIndexList)}" id="mainWeaponStats" class="mainWeaponStats">
                        <b>Main Battery</b><br />
                        Barrels<span class="barrels"/><br />
                        Range<span class="maxMainGunRange"/><br />
                        Reload<span class="mainGunReload"/><br />
                        Rotation<span class="mainGunRotation"/><br />
                        <span class="mainGunRotationTime"/><br />
                        <b>Shells</b><br />
                        AP Speed<span class="APShellSpeed"/><br />
                        AP Damage<span class="APShellDMG"/><br />
                        HE Speed<span class="HEShellSpeed"/><br />
                        HE Damage<span class="HEShellDMG"/><br />
                        Burn Probability&emsp;&emsp;&emsp;&emsp;<span class="HEShellBurnProb"/><br />
                        Dispersion<span class="mainGunDispersionRange"/><br />
                        Sigma<span class="sigmaCount"/><br />
                        Stealth<span class="stealthFireSurfaceDetection"/><br />
                    </div>
                    <div id="blank2" class="blank">
                        &emsp;
                    </div>
                    <div id="AASecondaryStats" class="AASecondaryStats">
                        <b>Anti-Air</b><br />
                        Far Range<span class="antiAirAuraDistanceFar"/><br />
                        Far DPS<span class="AAFarDPS"/><br />
                        Medium Range&emsp;&emsp;&emsp;&emsp;<span class="antiAirAuraDistanceMedium"/><br />
                        Medium DPS<span class="AAMediumDPS"/><br />
                        Near Range<span class="antiAirAuraDistanceNear"/><br />
                        Near DPS<span class="AANearDPS"/><br />
                        <br />
                        <b>Secondary</b><br />
                        Range<span class="secondaryMaxDist"/><br />
                    </div>
                    <div id="blank3" class="blank">
                        &emsp;
                    </div>
                    <div th:if="${not #lists.isEmpty(torpedoIndexList)}" id="torpedo" class="torpedo">
                        <b>Torpedoes</b><br />
                        Tubes<span class="tubes"/><br />
                        Range<span class="maxTorpedoRange"/><br />
                        Reload<span class="torpedoReload"/><br />
                        Speed<span  class="torpedoSpeed"/><br />
                        Detection&emsp;&emsp;&emsp;&emsp;<span class="torpedoVisibilityFactor"/><br />
                    </div>
                </div>
        </div>
    </div>
</main>
<script th:inline="javascript" th:src="@{/js/WoWSSSC/ShipModules.js}"></script>
<script th:inline="javascript">

    var shipName = [[${name}]];
    var shipNation = [[${nation}]];

    var apiShipJSON;

    var ship_id_str = [[${ship_id_str}]];

    var gpShipJSON = [[${gpShipJSON}]];
    var gpShipUpgradeInfo = gpShipJSON['ShipUpgradeInfo'];
    var GP_TurretJSON;

    var apiArtilleryUpgradeJSON = [[${apiTurretJSON}]];
    var apiHullUpgradeJSON = [[${apiHullJSON}]];
    var apiEngineUpgradeJSON = [[${apiEngineJSON}]];
    var apiRadarUpgradeJSON = [[${apiRadarJSON}]];
    var apiTorpedoUpgradeJSON = [[${apiTorpedoJSON}]];

//    var tier = 0;
    var maxRepairCost = 0;
    var maxHP = 0;
    var speed = 0;
    var speedCoef = 1;
    var rudderShift = 0;
    var turningRadius = 0;
    var sConceal = 0;
    var aConceal = 0;
    var burnTime = 0;
    var floodTime = 0;
    var engineObj;
    var horsePower;

    var numTurrets = 0;
    var numBarrels = 0;
    var turretBarrelDiameter = 0;
    var maxMainGunRange = 0;
    var maxDistCoef = 1;
    var mainGunReload = 0;
    var mainGunRotation = 0;
    var mainGunRotationTime = 0;

    var APShellSpeed = 0;
    var APShellDMG = 0;
    var HEShellSpeed = 0;
    var HEShellDMG = 0;
    var HEShellBurnProb = 0;
    var mainGunDispersionTangent = 0
    var mainGunDispersionRange = 0;
    var sigmaCount = 0;
    var stealthFireSurfaceDetection = 0;
    var AAFireAirDetection = 0;

    var AAFarBarrelDiameter = 0;
    var antiAirAuraDistanceFar = 0;
    var AAFarDPS = 0;
    var antiAirAuraDistanceMedium = 0;
    var AAMediumDPS = 0;
    var antiAirAuraDistanceNear = 0;
    var AANearDPS = 0;
    var secondaryMaxDist = 0;

    var torpDiameter = 0;
    var torpedoRotation = 0;
    var numTubes = 0;
    var numTorpTurrets = 0;
    var maxTorpedoRange = 0;
    var torpedoReload = 0;
    var torpedoSpeed = 0;
    var torpedoVisibilityFactor = 0;

    function load()
    {
        if ([[${radarUpgradeList}]].length > 0)
        {
            radar([[${radarUpgradeList}]][0], [[${radarUpgradeList}]]);
        }

        if ([[${turretUpgradeList}]].length > 0)
        {
            turret([[${turretUpgradeList}]][0], [[${turretUpgradeList}]]);
        }

        engine([[${engineUpgradeList}]][0], [[${engineUpgradeList}]]);

        hull([[${hullUpgradeList}]][0], [[${hullUpgradeList}]]);

        if ([[${torpedoUpgradeList}]].length > 0)
        {
            torpedo([[${torpedoUpgradeList}]][0], [[${torpedoUpgradeList}]]);
        }
    }
    window.onload = load();

    function turret(id, list)
    {
        if (typeof list == 'string')
        {
            list = list.substring(1, list.length - 1);
            list = list.split(', ');

            for (var i in list)
            {
                document.getElementById(list[i]).className = "button button_module";
            }
            document.getElementById(id).className = "button button_module_selected";
        }
        else
        {
            for (var i in list)
            {
                document.getElementById(list[i]['index']).className = "button button_module";
            }
            document.getElementById(id['index']).className = "button button_module_selected";
        }      

        setTurretStats(id);
    }

    function hull(id, list)
    {
        if (typeof list == 'string')
        {
            list = list.substring(1, list.length - 1);
            list = list.split(', ');

            for (var i in list)
            {
                document.getElementById(list[i]).className = "button button_module";
            }
            document.getElementById(id).className = "button button_module_selected";
        }
        else
        {
            for (var i in list)
            {
                document.getElementById(list[i]['index']).className = "button button_module";
            }
            document.getElementById(id['index']).className = "button button_module_selected";
        }

        setHullStats(id);
    }

    function engine(id, list)
    {
        if (typeof list == 'string')
        {
            list = list.substring(1, list.length - 1);
            list = list.split(', ');

            for (var i in list)
            {
                document.getElementById(list[i]).className = "button button_module";
            }
            document.getElementById(id).className = "button button_module_selected";
        }
        else
        {
            for (var i in list)
            {
                document.getElementById(list[i]['index']).className = "button button_module";
            }
            document.getElementById(id['index']).className = "button button_module_selected";
        }

        setEngineStats(id);
    }

    function radar(id, list)
    {
        if (typeof list == 'string')
        {
            list = list.substring(1, list.length - 1);
            list = list.split(', ');

            for (var i in list)
            {
                document.getElementById(list[i]).className = "button button_module";
            }
            document.getElementById(id).className = "button button_module_selected";
        }
        else
        {
            for (var i in list)
            {
                document.getElementById(list[i]['index']).className = "button button_module";
            }
            document.getElementById(id['index']).className = "button button_module_selected";
        }

        setRadarStats(id);
    }

    function torpedo(id, list)
    {
        if (typeof list == 'string')
        {
            list = list.substring(1, list.length - 1);
            list = list.split(', ');

            for (var i in list)
            {
                document.getElementById(list[i]).className = "button button_module";
            }
            document.getElementById(id).className = "button button_module_selected";
        }
        else
        {
            for (var i in list)
            {
                document.getElementById(list[i]['index']).className = "button button_module";
            }
            document.getElementById(id['index']).className = "button button_module_selected";
        }

        setTorpedoStats(id);
    }





    function refresh()
    {
//        document.querySelector('.hullStats .tier').innerHTML = tier.toLocaleString();
        document.querySelector('.hullStats .maxHP').innerHTML = maxHP.toLocaleString();
        document.querySelector('.hullStats .speed').innerHTML = (speed * speedCoef).toLocaleString() + " kts";
        document.querySelector('.hullStats .rudderShift').innerHTML = rudderShift.toLocaleString() + " s";
        document.querySelector('.hullStats .turningRadius').innerHTML = turningRadius.toLocaleString() + " m";
        document.querySelector('.hullStats .sConceal').innerHTML = sConceal.toLocaleString() + " km";
        document.querySelector('.hullStats .aConceal').innerHTML = aConceal.toLocaleString() + " km";
        document.querySelector('.hullStats .burnTime').innerHTML = burnTime.toLocaleString() + " s";
        document.querySelector('.hullStats .floodTime').innerHTML = floodTime.toLocaleString() + " s";

        if (numBarrels > 0)
        {
            document.querySelector('.mainWeaponStats .barrels').innerHTML = numTurrets.toLocaleString() + " X " + numBarrels.toLocaleString();
            document.querySelector('.mainWeaponStats .maxMainGunRange').innerHTML = (maxMainGunRange * maxDistCoef).toLocaleString() + " m";
            document.querySelector('.mainWeaponStats .mainGunReload').innerHTML = mainGunReload.toLocaleString() + " s";
            document.querySelector('.mainWeaponStats .mainGunRotation').innerHTML = mainGunRotation.toLocaleString() + " deg/s";
            document.querySelector('.mainWeaponStats .mainGunRotationTime').innerHTML = mainGunRotationTime.toLocaleString() + " s";
            document.querySelector('.mainWeaponStats .APShellSpeed').innerHTML = APShellSpeed.toLocaleString() + " m/s";
            document.querySelector('.mainWeaponStats .APShellDMG').innerHTML = APShellDMG.toLocaleString();
            document.querySelector('.mainWeaponStats .HEShellSpeed').innerHTML = HEShellSpeed.toLocaleString() + " m/s";
            document.querySelector('.mainWeaponStats .HEShellDMG').innerHTML = HEShellDMG.toLocaleString();
            document.querySelector('.mainWeaponStats .HEShellBurnProb').innerHTML = (HEShellBurnProb * 100).toLocaleString() + " %";
            document.querySelector('.mainWeaponStats .mainGunDispersionRange').innerHTML = (maxMainGunRange * maxDistCoef * mainGunDispersionTangent * 2).toLocaleString() + " m";
            document.querySelector('.mainWeaponStats .sigmaCount').innerHTML = sigmaCount.toLocaleString();
            document.querySelector('.mainWeaponStats .stealthFireSurfaceDetection').innerHTML = (sConceal + stealthFireSurfaceDetection).toLocaleString() + " km";
        }

        document.querySelector('.AASecondaryStats .antiAirAuraDistanceFar').innerHTML = antiAirAuraDistanceFar.toLocaleString() + " km";
        document.querySelector('.AASecondaryStats .AAFarDPS').innerHTML = AAFarDPS.toLocaleString();
        document.querySelector('.AASecondaryStats .antiAirAuraDistanceMedium').innerHTML = antiAirAuraDistanceMedium.toLocaleString() + " km";
        document.querySelector('.AASecondaryStats .AAMediumDPS').innerHTML = AAMediumDPS.toLocaleString();
        document.querySelector('.AASecondaryStats .antiAirAuraDistanceNear').innerHTML = antiAirAuraDistanceNear.toLocaleString() + " km";
        document.querySelector('.AASecondaryStats .AANearDPS').innerHTML = AANearDPS.toLocaleString();
        document.querySelector('.AASecondaryStats .secondaryMaxDist').innerHTML = secondaryMaxDist.toLocaleString() + " m";

        if (numTubes > 0)
        {
            document.querySelector('.torpedo .tubes').innerHTML = numTorpTurrets.toLocaleString() + " X " + numTubes.toLocaleString();
            document.querySelector('.torpedo .maxTorpedoRange').innerHTML = maxTorpedoRange.toLocaleString() + " km";
            document.querySelector('.torpedo .torpedoReload').innerHTML = torpedoReload.toLocaleString() + " s";
            document.querySelector('.torpedo .torpedoSpeed').innerHTML = torpedoSpeed.toLocaleString() + " kts";
            document.querySelector('.torpedo .torpedoVisibilityFactor').innerHTML = torpedoVisibilityFactor.toLocaleString() + " km";
        }
    }


</script>
</body>
</html>